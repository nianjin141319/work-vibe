<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BART å‘ä¸Šç®¡ç†ï¼šå·¥ä½œé—œä¿‚æ·±åº¦è¨ºæ–·</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f8fafc; color: #1e293b; }
        .glass-card { background: white; border: 1px solid rgba(0, 0, 0, 0.05); }
        .progress-bar { transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        .option-btn { transition: all 0.2s; border: 1px solid #e2e8f0; }
        .option-btn:hover { background: #f1f5f9; border-color: #3b82f6; transform: translateY(-1px); }
        .active-btn { background: #3b82f6 !important; color: white !important; border-color: #3b82f6 !important; }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div id="app" class="max-w-2xl w-full glass-card rounded-3xl p-8 shadow-xl">
        <div id="start-screen" class="text-center">
            <h1 class="text-3xl font-bold mb-4 text-slate-800">å‘ä¸Šç®¡ç†ï¼šBART æ·±åº¦è¨ºæ–·</h1>
            <p class="text-slate-500 mb-8 leading-relaxed">
                é€™ä¸æ˜¯ç± çµ±çš„å¿ƒç†æ¸¬é©—ï¼Œè€Œæ˜¯åŸºæ–¼ <strong>JD-R å·¥ä½œæ¨¡å‹</strong> çš„å¯¦æˆ°å·¥å…·ã€‚<br>
                é‡æ¸…ç§‘é•·å¸¶çµ¦ä½ çš„å£“åŠ›ï¼Œç©¶ç«Ÿæ˜¯ã€Œä»»å‹™éé‡ã€é‚„æ˜¯ã€Œè³‡æºä¸è¶³ã€ã€‚
            </p>
            <button onclick="startQuiz()" class="bg-slate-800 hover:bg-slate-700 text-white px-10 py-4 rounded-full font-bold transition-all shadow-lg">é–‹å§‹æƒ…å¢ƒè¨ºæ–·</button>
        </div>

        <div id="quiz-screen" class="hidden">
            <div class="mb-8">
                <div class="flex justify-between items-end mb-2">
                    <span id="cat-label" class="text-xs font-bold tracking-widest text-blue-500 uppercase">Scenario</span>
                    <span id="progress-text" class="text-xs text-slate-400 font-mono">01 / 12</span>
                </div>
                <div class="w-full bg-slate-100 h-1.5 rounded-full overflow-hidden">
                    <div id="progress-bar" class="progress-bar bg-blue-500 h-full w-0"></div>
                </div>
            </div>
            
            <h2 id="question-text" class="text-xl mb-10 min-h-[4rem] font-medium leading-relaxed text-slate-800">è¼‰å…¥ä¸­...</h2>
            
            <div class="space-y-3" id="options-container">
                </div>
        </div>

        <div id="result-screen" class="hidden">
            <h2 class="text-2xl font-bold text-center mb-6">è¨ºæ–·åˆ†æå ±å‘Š</h2>
            <div class="mb-10 flex justify-center">
                <div class="w-full max-w-[360px]">
                    <canvas id="radarChart"></canvas>
                </div>
            </div>
            
            <div id="result-box" class="p-6 rounded-2xl mb-8 border border-blue-100 bg-blue-50">
                <h3 id="result-label" class="text-xl font-bold mb-2 text-blue-700"></h3>
                <p id="result-desc" class="text-slate-600 text-sm leading-relaxed mb-6"></p>
                
                <div class="space-y-6">
                    <div>
                        <h4 class="text-xs font-bold text-blue-800 uppercase tracking-wider mb-3">ğŸ›  å‘ä¸Šç®¡ç†å»ºè­° (POA æ³•)ï¼š</h4>
                        <div id="poa-advice" class="bg-white/60 p-4 rounded-xl text-sm text-slate-700 leading-relaxed border border-white"></div>
                    </div>
                </div>
            </div>

            <button onclick="location.reload()" class="w-full py-3 text-slate-400 hover:text-slate-600 transition-colors text-sm">é‡æ–°è©•ä¼°</button>
        </div>
    </div>

    <script>
        const questions = [
            // æƒ…å¢ƒåŒ–é¡Œç›®
            { q: "ç•¶ç§‘é•·åœ¨æœƒè­°ä¸Šçªç„¶æ”¹è®Šå°ˆæ¡ˆå„ªå…ˆé †åºæ™‚ï¼Œæˆ‘é€šå¸¸æœƒï¼š", options: ["æ“šç†åŠ›çˆ­ï¼Œè¨è«–åˆç†æ€§", "ç¨ä½œç¢ºèªå¾Œæ¥å—", "å…§å¿ƒæŠ—æ‹’ä½†ä¿æŒæ²ˆé»˜", "ç«‹åˆ»æ”¾ä¸‹æ‰‹é‚Šå·¥ä½œé…åˆ"], cat: "B" },
            { q: "è‹¥ç§‘é•·è·³éæˆ‘ç›´æ¥äº¤ä»£çµ„å“¡é›œäº‹ï¼Œæˆ‘çš„ç¬¬ä¸€åæ‡‰æ˜¯ï¼š", options: ["æ‰¾ç§‘é•·é‡æ¸…æºé€šçª—å£", "ç§ä¸‹è«‹çµ„å“¡å‹™å¿…å ±å‚™", "æ„Ÿåˆ°ä¸å¿«ä½†è‡ªè¡Œè£œä½", "èªå‘½æ¥å—ï¼Œè¦ºå¾—åæ˜ ä¹Ÿæ²’ç”¨"], cat: "A" },
            { q: "é—œæ–¼ç§‘é•·å°æˆ‘é€™å€‹è§’è‰²çš„ã€çœŸæ­£æœŸå¾…ã€ï¼Œæˆ‘è¦ºå¾—ï¼š", options: ["éå¸¸æ¸…æ¥šä¸”æœ‰å…±è­˜", "å¤§è‡´äº†è§£ä½†ç´°ç¯€æ¨¡ç³Š", "å¸¸è¦ºå¾—ä»–çš„æœŸå¾…éš¨å¿ƒæƒ…è®Šå‹•", "å®Œå…¨æ‰æ‘¸ä¸å®š"], cat: "R" },
            { q: "è™•ç†ç§‘é•·è‡¨æ™‚äº¤è¾¦çš„å…¬æ–‡æˆ–ç‘£äº‹ï¼Œä½”ç”¨æˆ‘æ­£å¸¸å°ˆæ¡ˆæ™‚é–“çš„æ¯”ä¾‹ï¼š", options: ["ä½æ–¼ 10%", "ç´„ 20% - 30%", "æ¥è¿‘ 50%", "è¶…é 50%ï¼Œå¸¸è¦åŠ ç­è£œå°ˆæ¡ˆ"], cat: "T" },
            
            // JD-R è³‡æºé¡Œç›® (æ­£å‘)
            { q: "ç•¶æˆ‘åœ¨å·¥ä½œé‡åˆ°ç“¶é ¸æ™‚ï¼Œç§‘é•·èƒ½æä¾›å¯¦è³ªå»ºè­°æˆ–è³‡æºï¼š", options: ["ç¸½æ˜¯å¦‚æ­¤", "ç¶“å¸¸å¦‚æ­¤", "å¾ˆå°‘ç™¼ç”Ÿ", "å¾ä¸å¦‚æ­¤"], cat: "Res" },
            { q: "æˆ‘è¦ºå¾—ç§‘é•·é¡˜æ„ç†è§£æˆ‘çš„è¨­è¨ˆè€ƒé‡æˆ–ç®¡ç†é›£è™•ï¼š", options: ["é«˜åº¦èªåŒ", "éƒ¨åˆ†èªåŒ", "ä¸å¤ªèªåŒ", "å®Œå…¨ä¸èªåŒ"], cat: "Res" },
            
            // æ›´å¤šå£“åŠ›æƒ…å¢ƒ
            { q: "ç§‘é•·åœ¨éå·¥ä½œæ™‚é–“å‚³è¨Šæ¯äº¤è¾¦äº‹é …çš„é »ç‡ï¼š", options: ["å¹¾ä¹æ²’æœ‰", "å¶çˆ¾ç™¼ç”Ÿ", "æ¯é€±éƒ½æœ‰", "å¹¾ä¹æ¯å¤©"], cat: "B" },
            { q: "åœ¨çµ„å…§è³‡æºåˆ†é…ï¼ˆå¦‚è€ƒç¸¾ã€é ç®—ï¼‰ä¸Šï¼Œæˆ‘æ“æœ‰çš„è©±èªæ¬Šï¼š", options: ["å…·æœ‰æ±ºå®šæ€§", "æœ‰éƒ¨åˆ†å½±éŸ¿åŠ›", "åƒ…èƒ½æä¾›åƒè€ƒ", "å®Œå…¨æ²’æœ‰æ¬ŠåŠ›"], cat: "A" },
            { q: "ç•¶æˆ‘å˜—è©¦å„ªåŒ–çµ„å…§æµç¨‹æ™‚ï¼Œç§‘é•·çš„æ”¯æŒæ…‹åº¦ï¼š", options: ["ç©æ¥µæ”¯æŒä¸¦æˆæ¬Š", "å£é ­æ”¯æŒä½†æ²’è¡Œå‹•", "æŒä¿ç•™æˆ–è§€æœ›æ…‹åº¦", "ç¶“å¸¸è³ªç–‘æˆ–é˜»ç¤™"], cat: "R" },
            { q: "ç›®å‰çš„ä»»å‹™é‡æ˜¯å¦è®“æˆ‘è¦ºå¾—ã€æ­£åœ¨æ¶ˆè€—å€‹äººå¥åº·æˆ–æƒ…ç·’ã€ï¼š", options: ["å®Œå…¨ä¸æœƒ", "å¶çˆ¾ç–²ç´¯", "å¸¸æ„Ÿç„¦æ…®", "å·²ç²¾ç–²åŠ›ç«­"], cat: "T" },
            { q: "æˆ‘å¯ä»¥æ˜ç¢ºæ‹’çµ•ç§‘é•·ä¸åˆç†çš„è¦æ±‚è€Œä¸æ„Ÿåˆ°ææ‡¼ï¼š", options: ["å¾ˆæœ‰ä¿¡å¿ƒ", "çœ‹æƒ…æ³æ±ºå®š", "æœ‰é»å›°é›£", "å®Œå…¨ä¸æ•¢"], cat: "B" },
            { q: "ç§‘é•·æ˜¯å¦æœƒæä¾›æ¸…æ¥šçš„ã€æˆåŠŸæ¨™æº–ã€ï¼Œè€Œä¸æ˜¯åšå®Œæ‰èªªä¸å°ï¼š", options: ["æ¨™æº–æ¥µæ¸…æ™°", "å°šç®—æ˜ç¢º", "å¸¸æœ‰ç°è‰²åœ°å¸¶", "å…¨æ†‘ä»–ç•¶ä¸‹ä¸»è§€"], cat: "Res" }
        ];

        let currentIdx = 0;
        let scores = { B: 0, A: 0, R: 0, T: 0, Res: 0 };

        function startQuiz() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            const q = questions[currentIdx];
            document.getElementById('cat-label').innerText = "Step " + (currentIdx + 1);
            document.getElementById('question-text').innerText = q.q;
            document.getElementById('progress-text').innerText = `${currentIdx + 1} / 12`;
            document.getElementById('progress-bar').style.width = `${((currentIdx + 1) / questions.length) * 100}%`;
            
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            q.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn w-full p-4 rounded-xl text-left text-slate-600';
                btn.innerText = opt;
                btn.onclick = () => selectOption(i + 1);
                container.appendChild(btn);
            });
        }

        function selectOption(val) {
            const cat = questions[currentIdx].cat;
            // è³‡æºé¡Œ (Res) åˆ†æ•¸åå‘è¨ˆç®—ä»¥ç¬¦åˆé›·é”åœ–é‚è¼¯ (åˆ†æ•¸è¶Šé«˜ä»£è¡¨å£“åŠ›è¶Šå¤§/è³‡æºè¶Šå°‘)
            scores[cat] += (cat === 'Res') ? (5 - val) : val;
            
            currentIdx++;
            if (currentIdx < questions.length) {
                showQuestion();
            } else {
                showResult();
            }
        }

        function showResult() {
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });

            const data = [scores.B, scores.A, scores.R, scores.T, scores.Res];
            const maxCat = ['B', 'A', 'R', 'T'].reduce((a, b) => scores[a] > scores[b] ? a : b);

            const report = {
                B: { label: "ç•Œç·šå¤±å®ˆï¼šé‚Šç•Œæ½°æ•£è€…", desc: "å£“åŠ›æºæ–¼ç§‘é•·éš¨æ„ç©¿é€ä½ çš„é˜²ç«ç‰†ã€‚ä½ æ‰¿æ¥äº†éå¤šã€é›œè¨Šã€ï¼Œå°è‡´çµ„é•·çš„æ ¸å¿ƒè·èƒ½è¢«ç¨€é‡‹ã€‚", poa: "<strong>POA ç­–ç•¥ï¼š</strong><br>â€¢ Plan: åˆ—å‡ºç›®å‰çš„å°ˆæ¡ˆæ’ç¨‹ã€‚<br>â€¢ Offer: æè­°å°‡ç§‘é•·çš„è‡¨æ™‚äº¤è¾¦ç´å…¥ä¸‹é€±æ¸…å–®ã€‚<br>â€¢ Ask: è«‹ç§‘é•·ç¢ºèªï¼Œè‹¥ç¾åœ¨è™•ç†ï¼Œæ˜¯å¦èƒ½æ¥å—åŸå°ˆæ¡ˆå»¶å¾Œï¼Ÿ" },
                A: { label: "æ¬ŠåŠ›çœŸç©ºï¼šç„¡æ¬Šå®ˆè­·è€…", desc: "ç§‘é•·è·³éä½ ä¸‹ä»¤ï¼Œæˆ–ä¸çµ¦äºˆå¯¦è³ªæˆæ¬Šã€‚ä½ æ­£åœ¨ç”¨ã€å€‹äººè‹¦å‹ã€ä»£å„Ÿã€çµæ§‹ç¼ºå¤±ã€ã€‚", poa: "<strong>POA ç­–ç•¥ï¼š</strong><br>â€¢ Plan: æ“¬å®šçµ„å“¡å›å ±æ©Ÿåˆ¶ã€‚<br>â€¢ Offer: æè­°ç”±ä½ çµ±ä¸€åŒ¯ç¸½çµ¦ç§‘é•·ã€‚<br>â€¢ Ask: è©¢å•ç§‘é•·æ˜¯å¦èƒ½åœ¨æœƒè­°ä¸­ï¼Œé‡ç”³ä½ ä½œç‚ºå–®ä¸€çª—å£çš„å¿…è¦æ€§ã€‚" },
                R: { label: "è§’è‰²å®šä½ï¼šæ…¢æ€§æ¶ˆè€—ä¸­", desc: "ç§‘é•·æŠŠä½ ç•¶ã€è³‡æ·±åŠ©ç†ã€ç”¨ã€‚é€™ç¨®è§’è‰²éŒ¯ä½è®“ä½ èŠ±å¤ªå¤šæ™‚é–“è§£é‡‹ç´°ç¯€ï¼Œè€Œéè§£æ±ºå•é¡Œã€‚", poa: "<strong>POA ç­–ç•¥ï¼š</strong><br>â€¢ Plan: æº–å‚™ä¸€ä»½ç®¡ç†å ±è¡¨ï¼ˆè€ŒéåŸ·è¡Œå ±è¡¨ï¼‰ã€‚<br>â€¢ Offer: æä¾›é—œæ–¼çµ„å‹™å„ªåŒ–çš„å»ºè­°ã€‚<br>â€¢ Ask: è©¢å•ç§‘é•·å°ä½ è·ä½çš„æ ¸å¿ƒ KPI æ˜¯ã€æº–æ™‚ç”¢å‡ºã€é‚„æ˜¯ã€æµç¨‹å»ºç«‹ã€ï¼Ÿ" },
                T: { label: "ä»»å‹™éè¼‰ï¼šé«˜é¢¨éšªç‡ƒç‡’", desc: "ä»»å‹™é‡é è¶…è² è·ï¼Œä¸”å¤šç‚ºç„¡æ•ˆä»»å‹™ã€‚ä½ æ­£åœ¨ç‚ºäº†è£œåˆ¶åº¦çš„æ´è€Œç‡ƒç‡’å¥åº·ã€‚", poa: "<strong>POA ç­–ç•¥ï¼š</strong><br>â€¢ Plan: å±•ç¤ºç›®å‰çš„ã€ä»»å‹™ vs æ™‚é–“ã€åˆ†é…è¡¨ã€‚<br>â€¢ Offer: å»ºè­°æŸäº›ç‘£äº‹å¯æ¨™æº–åŒ–æˆ–äº¤è¾¦å‡ºå»ã€‚<br>â€¢ Ask: è©¢å•ç§‘é•·å“ªäº›æ˜¯ã€ä¸ä¸€å®šè¦åšã€çš„åƒåœ¾ä»»å‹™ï¼Ÿ" }
            };

            const final = report[maxCat];
            document.getElementById('result-label').innerText = final.label;
            document.getElementById('result-desc').innerText = final.desc;
            document.getElementById('poa-advice').innerHTML = final.poa;

            renderChart(data);
        }

        function renderChart(data) {
            const ctx = document.getElementById('radarChart').getContext('2d');
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['é‚Šç•Œ (B)', 'æ¬Šå¨ (A)', 'è§’è‰² (R)', 'ä»»å‹™ (T)', 'è³‡æºä¸è¶³ (Res)'],
                    datasets: [{
                        data: data,
                        fill: true,
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderColor: '#3b82f6',
                        pointBackgroundColor: '#3b82f6',
                        borderWidth: 2
                    }]
                },
                options: {
                    scales: {
                        r: {
                            min: 0, max: 15,
                            grid: { color: '#e2e8f0' },
                            angleLines: { color: '#e2e8f0' },
                            pointLabels: { font: { size: 12, weight: 'bold' }, color: '#64748b' },
                            ticks: { display: false }
                        }
                    },
                    plugins: { legend: { display: false } }
                }
            });
        }
    </script>
</body>
</html>
